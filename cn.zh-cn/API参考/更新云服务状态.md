# 更新云服务状态<a name="apig-phapi-180713200"></a>

## 功能介绍<a name="section10817141914013"></a>

当租户的余额不足造成扣费失败，由云运营触发更新云服务的状态，云服务对实例进行具体的对应操作。比如租户欠费后，云运营冻结云主机，云主机进行停机操作、且租户不能自助启动。

## URI<a name="section18225727194010"></a>

HTTP/HTTPS请求方法以及URI如下表所示。

**表 1**  HTTP/HTTPS请求方法以及URI

<a name="table1435975114217"></a>
<table><thead align="left"><tr id="row5359552427"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.3.1.1"><p id="p11121130154214"><a name="p11121130154214"></a><a name="p11121130154214"></a>请求方法</p>
</th>
<th class="cellrowborder" valign="top" width="80%" id="mcps1.2.3.1.2"><p id="p1812123034218"><a name="p1812123034218"></a><a name="p1812123034218"></a>URI</p>
</th>
</tr>
</thead>
<tbody><tr id="row9360115184218"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p181321637194217"><a name="p181321637194217"></a><a name="p181321637194217"></a>PUT</p>
</td>
<td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p013216372425"><a name="p013216372425"></a><a name="p013216372425"></a>/v1/services/status</p>
</td>
</tr>
</tbody>
</table>

## 请求消息<a name="section10714113264018"></a>

**表 2**  参数说明

<a name="table1054562019449"></a>
<table><thead align="left"><tr id="row054619207440"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.5.1.1"><p id="p14210153414445"><a name="p14210153414445"></a><a name="p14210153414445"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.5.1.2"><p id="p3210634154418"><a name="p3210634154418"></a><a name="p3210634154418"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.5.1.3"><p id="p1021183418448"><a name="p1021183418448"></a><a name="p1021183418448"></a>类型</p>
</th>
<th class="cellrowborder" valign="top" width="40%" id="mcps1.2.5.1.4"><p id="p621117347443"><a name="p621117347443"></a><a name="p621117347443"></a>说明</p>
</th>
</tr>
</thead>
<tbody><tr id="row8546202034415"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.5.1.1 "><p id="p2211113420446"><a name="p2211113420446"></a><a name="p2211113420446"></a>resources</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.5.1.2 "><p id="p15211134184416"><a name="p15211134184416"></a><a name="p15211134184416"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.5.1.3 "><p id="p2211183494416"><a name="p2211183494416"></a><a name="p2211183494416"></a>Resource[]</p>
</td>
<td class="cellrowborder" valign="top" width="40%" headers="mcps1.2.5.1.4 "><p id="p18211834164419"><a name="p18211834164419"></a><a name="p18211834164419"></a>资源列表</p>
</td>
</tr>
<tr id="row1654612015444"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.5.1.1 "><p id="p821123411444"><a name="p821123411444"></a><a name="p821123411444"></a>status</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.5.1.2 "><p id="p10211163474419"><a name="p10211163474419"></a><a name="p10211163474419"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.5.1.3 "><p id="p102111734124414"><a name="p102111734124414"></a><a name="p102111734124414"></a>Integer</p>
</td>
<td class="cellrowborder" valign="top" width="40%" headers="mcps1.2.5.1.4 "><p id="p15211153419449"><a name="p15211153419449"></a><a name="p15211153419449"></a>云服务或资源实例的状态：</p>
<a name="ul1929151016457"></a><a name="ul1929151016457"></a><ul id="ul1929151016457"><li>0：解冻/正常（云服务恢复正常，比如解冻操作）</li><li>1：冻结（资源和数据会保留，但租户无法再正常使用云服务）</li><li>2：删除/终止（资源和数据将清除）</li><li>3：受限（UDS控制用户桶访问权限）</li></ul>
</td>
</tr>
</tbody>
</table>

**表 3**  resources参数说明

<a name="table1334517534252"></a>
<table><thead align="left"><tr id="row103467533255"><th class="cellrowborder" valign="top" width="25%" id="mcps1.2.5.1.1"><p id="p56122462614"><a name="p56122462614"></a><a name="p56122462614"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="25%" id="mcps1.2.5.1.2"><p id="p16611324182614"><a name="p16611324182614"></a><a name="p16611324182614"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="25%" id="mcps1.2.5.1.3"><p id="p4611024122617"><a name="p4611024122617"></a><a name="p4611024122617"></a>类型</p>
</th>
<th class="cellrowborder" valign="top" width="25%" id="mcps1.2.5.1.4"><p id="p1761182418266"><a name="p1761182418266"></a><a name="p1761182418266"></a>说明</p>
</th>
</tr>
</thead>
<tbody><tr id="row8346153122511"><td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.5.1.1 "><p id="p1461162442615"><a name="p1461162442615"></a><a name="p1461162442615"></a>tenantId</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.5.1.2 "><p id="p13611524142616"><a name="p13611524142616"></a><a name="p13611524142616"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.5.1.3 "><p id="p2061182420261"><a name="p2061182420261"></a><a name="p2061182420261"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.5.1.4 "><p id="p86114243269"><a name="p86114243269"></a><a name="p86114243269"></a>租户Project ID</p>
</td>
</tr>
<tr id="row1134635342519"><td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.5.1.1 "><p id="p206117242265"><a name="p206117242265"></a><a name="p206117242265"></a>resourceInfos</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.5.1.2 "><p id="p1462024172610"><a name="p1462024172610"></a><a name="p1462024172610"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.5.1.3 "><p id="p166212419269"><a name="p166212419269"></a><a name="p166212419269"></a>ResourceInfo[]</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.5.1.4 "><p id="p18621824132617"><a name="p18621824132617"></a><a name="p18621824132617"></a>资源信息列表</p>
</td>
</tr>
</tbody>
</table>

**表 4**  resourceInfos参数说明

<a name="table6873082613"></a>
<table><thead align="left"><tr id="row14871301264"><th class="cellrowborder" valign="top" width="25%" id="mcps1.2.5.1.1"><p id="p1940637172610"><a name="p1940637172610"></a><a name="p1940637172610"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="25%" id="mcps1.2.5.1.2"><p id="p1240737102617"><a name="p1240737102617"></a><a name="p1240737102617"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="25%" id="mcps1.2.5.1.3"><p id="p11407370265"><a name="p11407370265"></a><a name="p11407370265"></a>类型</p>
</th>
<th class="cellrowborder" valign="top" width="25%" id="mcps1.2.5.1.4"><p id="p154014375268"><a name="p154014375268"></a><a name="p154014375268"></a>说明</p>
</th>
</tr>
</thead>
<tbody><tr id="row287140102611"><td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.5.1.1 "><p id="p94043719267"><a name="p94043719267"></a><a name="p94043719267"></a>resourceType</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.5.1.2 "><p id="p440103714263"><a name="p440103714263"></a><a name="p440103714263"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.5.1.3 "><p id="p1140173712267"><a name="p1140173712267"></a><a name="p1140173712267"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.5.1.4 "><p id="p1340163718261"><a name="p1340163718261"></a><a name="p1340163718261"></a>资源类型字段，全局唯一</p>
</td>
</tr>
<tr id="row178912011266"><td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.5.1.1 "><p id="p440237182610"><a name="p440237182610"></a><a name="p440237182610"></a>resourceId</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.5.1.2 "><p id="p3401137132617"><a name="p3401137132617"></a><a name="p3401137132617"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.5.1.3 "><p id="p5409375267"><a name="p5409375267"></a><a name="p5409375267"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.5.1.4 "><p id="p340337172615"><a name="p340337172615"></a><a name="p340337172615"></a>资源实例ID</p>
</td>
</tr>
</tbody>
</table>

请求消息样例：

```
{
	"resources": [{
		"resourceInfos": [{
			"resourceId": " be40cd2824fb4fb4a58c47b6def47c98",
			"resourceType": "hws.resource.type.apig"
		}],
		"tenantId": "be40cd2824fb4fb4a58c47b6def47c98"
	}],
	"status": 1
}
```

## 响应消息<a name="section199190366272"></a>

无

## 状态码<a name="section184126612810"></a>

**表 5**  返回消息说明

<a name="table19331530192811"></a>
<table><thead align="left"><tr id="row203383082813"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.3.1.1"><p id="p4830607299"><a name="p4830607299"></a><a name="p4830607299"></a>状态码</p>
</th>
<th class="cellrowborder" valign="top" width="80%" id="mcps1.2.3.1.2"><p id="p108308052920"><a name="p108308052920"></a><a name="p108308052920"></a>说明</p>
</th>
</tr>
</thead>
<tbody><tr id="row1233930202815"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p38306018299"><a name="p38306018299"></a><a name="p38306018299"></a>200</p>
</td>
<td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p7830100102919"><a name="p7830100102919"></a><a name="p7830100102919"></a>OK</p>
</td>
</tr>
<tr id="row20338308287"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p18306032914"><a name="p18306032914"></a><a name="p18306032914"></a>400</p>
</td>
<td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p18830160162916"><a name="p18830160162916"></a><a name="p18830160162916"></a>Bad Request</p>
</td>
</tr>
<tr id="row03316308280"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p1983018020299"><a name="p1983018020299"></a><a name="p1983018020299"></a>401</p>
</td>
<td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p28301505295"><a name="p28301505295"></a><a name="p28301505295"></a>Unauthorized</p>
</td>
</tr>
</tbody>
</table>

