# 获取话单<a name="apig-phapi-180713199"></a>

## 功能介绍<a name="section77011735175414"></a>

提供给SDR话单服务的API接口。

查询指定时间段内的指定数量的APIG服务租户的话单数据。

## URI<a name="section916888135510"></a>

HTTP/HTTPS请求方法以及URI如下表所示。

**表 1**  HTTP/HTTPS请求方法以及URI

<a name="table11507134785618"></a>
<table><thead align="left"><tr id="row1150904725614"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.3.1.1"><p id="p75091547155615"><a name="p75091547155615"></a><a name="p75091547155615"></a>请求方法</p>
</th>
<th class="cellrowborder" valign="top" width="80%" id="mcps1.2.3.1.2"><p id="p16509947105618"><a name="p16509947105618"></a><a name="p16509947105618"></a>URI</p>
</th>
</tr>
</thead>
<tbody><tr id="row450934716564"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p14509154711566"><a name="p14509154711566"></a><a name="p14509154711566"></a>GET</p>
</td>
<td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p19509184745614"><a name="p19509184745614"></a><a name="p19509184745614"></a>/v1/{project_id}/apigw/instances/{instance_id}/statistics/billing?start={0}&amp;limit={1}&amp;start_time={2}&amp;end_time={3}</p>
</td>
</tr>
</tbody>
</table>

## 请求参数<a name="section1298041285814"></a>

**表 2**  请求消息参数说明

<a name="table871144945810"></a>
<table><thead align="left"><tr id="row14734499589"><th class="cellrowborder" valign="top" width="25%" id="mcps1.2.5.1.1"><p id="p1973174918589"><a name="p1973174918589"></a><a name="p1973174918589"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="16.09%" id="mcps1.2.5.1.2"><p id="p4731749125817"><a name="p4731749125817"></a><a name="p4731749125817"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="20.11%" id="mcps1.2.5.1.3"><p id="p1730491589"><a name="p1730491589"></a><a name="p1730491589"></a>类型</p>
</th>
<th class="cellrowborder" valign="top" width="38.800000000000004%" id="mcps1.2.5.1.4"><p id="p1073649175817"><a name="p1073649175817"></a><a name="p1073649175817"></a>说明</p>
</th>
</tr>
</thead>
<tbody><tr id="row18204471023"><td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.5.1.1 "><p id="p55878963"><a name="p55878963"></a><a name="p55878963"></a>project_id</p>
</td>
<td class="cellrowborder" valign="top" width="16.09%" headers="mcps1.2.5.1.2 "><p id="p29902160"><a name="p29902160"></a><a name="p29902160"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20.11%" headers="mcps1.2.5.1.3 "><p id="p6155914"><a name="p6155914"></a><a name="p6155914"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="38.800000000000004%" headers="mcps1.2.5.1.4 "><p id="p28867016"><a name="p28867016"></a><a name="p28867016"></a>项目ID。可从控制台“我的凭证”中获取region下项目ID，管理员权限可查询。</p>
</td>
</tr>
<tr id="row821614714214"><td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.5.1.1 "><p id="p1780913159538"><a name="p1780913159538"></a><a name="p1780913159538"></a>instance_id</p>
</td>
<td class="cellrowborder" valign="top" width="16.09%" headers="mcps1.2.5.1.2 "><p id="p9809215115310"><a name="p9809215115310"></a><a name="p9809215115310"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20.11%" headers="mcps1.2.5.1.3 "><p id="p1280914152538"><a name="p1280914152538"></a><a name="p1280914152538"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="38.800000000000004%" headers="mcps1.2.5.1.4 "><p id="p1880914157537"><a name="p1880914157537"></a><a name="p1880914157537"></a>实例ID，可从API网关控制台的专享版实例信息中获取。</p>
</td>
</tr>
<tr id="row87315493588"><td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.5.1.1 "><p id="p173061841314"><a name="p173061841314"></a><a name="p173061841314"></a>start</p>
</td>
<td class="cellrowborder" valign="top" width="16.09%" headers="mcps1.2.5.1.2 "><p id="p969851813"><a name="p969851813"></a><a name="p969851813"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20.11%" headers="mcps1.2.5.1.3 "><p id="p26925114116"><a name="p26925114116"></a><a name="p26925114116"></a>Integer</p>
</td>
<td class="cellrowborder" valign="top" width="38.800000000000004%" headers="mcps1.2.5.1.4 "><p id="p19691651310"><a name="p19691651310"></a><a name="p19691651310"></a>查询话单的起始索引</p>
</td>
</tr>
<tr id="row197434912586"><td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.5.1.1 "><p id="p16306144114116"><a name="p16306144114116"></a><a name="p16306144114116"></a>limit</p>
</td>
<td class="cellrowborder" valign="top" width="16.09%" headers="mcps1.2.5.1.2 "><p id="p126913519113"><a name="p126913519113"></a><a name="p126913519113"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20.11%" headers="mcps1.2.5.1.3 "><p id="p369125113111"><a name="p369125113111"></a><a name="p369125113111"></a>Integer</p>
</td>
<td class="cellrowborder" valign="top" width="38.800000000000004%" headers="mcps1.2.5.1.4 "><p id="p86912517116"><a name="p86912517116"></a><a name="p86912517116"></a>每次查询限制的查询条数</p>
</td>
</tr>
<tr id="row167414925814"><td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.5.1.1 "><p id="p3306641319"><a name="p3306641319"></a><a name="p3306641319"></a>start_time</p>
</td>
<td class="cellrowborder" valign="top" width="16.09%" headers="mcps1.2.5.1.2 "><p id="p13693513113"><a name="p13693513113"></a><a name="p13693513113"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20.11%" headers="mcps1.2.5.1.3 "><p id="p3694515114"><a name="p3694515114"></a><a name="p3694515114"></a>Integer</p>
</td>
<td class="cellrowborder" valign="top" width="38.800000000000004%" headers="mcps1.2.5.1.4 "><p id="p1769155119110"><a name="p1769155119110"></a><a name="p1769155119110"></a>话单开始时间</p>
</td>
</tr>
<tr id="row67415491585"><td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.5.1.1 "><p id="p83064412117"><a name="p83064412117"></a><a name="p83064412117"></a>end_time</p>
</td>
<td class="cellrowborder" valign="top" width="16.09%" headers="mcps1.2.5.1.2 "><p id="p3691511113"><a name="p3691511113"></a><a name="p3691511113"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20.11%" headers="mcps1.2.5.1.3 "><p id="p6697511314"><a name="p6697511314"></a><a name="p6697511314"></a>Integer</p>
</td>
<td class="cellrowborder" valign="top" width="38.800000000000004%" headers="mcps1.2.5.1.4 "><p id="p569175116110"><a name="p569175116110"></a><a name="p569175116110"></a>话单结束时间</p>
</td>
</tr>
</tbody>
</table>

## 响应参数<a name="section1924341612466"></a>

**表 3**  响应参数说明

<a name="table1572222154819"></a>
<table><thead align="left"><tr id="row4722162124812"><th class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.2.4.1.1"><p id="p14494181014915"><a name="p14494181014915"></a><a name="p14494181014915"></a>名称</p>
</th>
<th class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.2.4.1.2"><p id="p449481014494"><a name="p449481014494"></a><a name="p449481014494"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.2.4.1.3"><p id="p0494191044917"><a name="p0494191044917"></a><a name="p0494191044917"></a>说明</p>
</th>
</tr>
</thead>
<tbody><tr id="row5722921144812"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.1 "><p id="p154941710124915"><a name="p154941710124915"></a><a name="p154941710124915"></a>project_id</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.2 "><p id="p114942102492"><a name="p114942102492"></a><a name="p114942102492"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.3 "><p id="p10494171019493"><a name="p10494171019493"></a><a name="p10494171019493"></a>租户ID</p>
</td>
</tr>
<tr id="row07221521144814"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.1 "><p id="p649418107497"><a name="p649418107497"></a><a name="p649418107497"></a>regionId</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.2 "><p id="p64952104498"><a name="p64952104498"></a><a name="p64952104498"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.3 "><p id="p04951010184910"><a name="p04951010184910"></a><a name="p04951010184910"></a>Region编码</p>
</td>
</tr>
<tr id="row127225216483"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.1 "><p id="p154954105492"><a name="p154954105492"></a><a name="p154954105492"></a>azId</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.2 "><p id="p34952010154916"><a name="p34952010154916"></a><a name="p34952010154916"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.3 "><p id="p154951210114916"><a name="p154951210114916"></a><a name="p154951210114916"></a>AZ编码</p>
</td>
</tr>
<tr id="row87221121164818"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.1 "><p id="p10495141014492"><a name="p10495141014492"></a><a name="p10495141014492"></a>cloudServiceType</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.2 "><p id="p749514106491"><a name="p749514106491"></a><a name="p749514106491"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.3 "><p id="p649521094919"><a name="p649521094919"></a><a name="p649521094919"></a>云服务类型编码</p>
</td>
</tr>
<tr id="row572310210483"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.1 "><p id="p204951810114916"><a name="p204951810114916"></a><a name="p204951810114916"></a>resourceType</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.2 "><p id="p1649515107498"><a name="p1649515107498"></a><a name="p1649515107498"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.3 "><p id="p10495210144913"><a name="p10495210144913"></a><a name="p10495210144913"></a>云资源类型编码</p>
</td>
</tr>
<tr id="row1372352119489"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.1 "><p id="p14951510184920"><a name="p14951510184920"></a><a name="p14951510184920"></a>resourceSpecCode</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.2 "><p id="p9495310184917"><a name="p9495310184917"></a><a name="p9495310184917"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.3 "><p id="p249571024919"><a name="p249571024919"></a><a name="p249571024919"></a>云资源规格编码</p>
</td>
</tr>
<tr id="row1723221174818"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.1 "><p id="p17495110114911"><a name="p17495110114911"></a><a name="p17495110114911"></a>resource_id</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.2 "><p id="p149531017494"><a name="p149531017494"></a><a name="p149531017494"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.3 "><p id="p849514109490"><a name="p849514109490"></a><a name="p849514109490"></a>话单资源ID</p>
</td>
</tr>
<tr id="row178012914488"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.1 "><p id="p9495810174918"><a name="p9495810174918"></a><a name="p9495810174918"></a>bssParams</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.2 "><p id="p1649519100497"><a name="p1649519100497"></a><a name="p1649519100497"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.3 "><p id="p1449512107492"><a name="p1449512107492"></a><a name="p1449512107492"></a>扩展的运营参数</p>
</td>
</tr>
<tr id="row9373432134818"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.1 "><p id="p94959109492"><a name="p94959109492"></a><a name="p94959109492"></a>beginTime</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.2 "><p id="p1149510108499"><a name="p1149510108499"></a><a name="p1149510108499"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.3 "><p id="p1549531074911"><a name="p1549531074911"></a><a name="p1549531074911"></a>话单开始时间</p>
</td>
</tr>
<tr id="row452593904810"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.1 "><p id="p10495171020496"><a name="p10495171020496"></a><a name="p10495171020496"></a>endTime</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.2 "><p id="p74959102490"><a name="p74959102490"></a><a name="p74959102490"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.3 "><p id="p1349519101490"><a name="p1349519101490"></a><a name="p1349519101490"></a>话单结束时间</p>
</td>
</tr>
<tr id="row1799441154815"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.1 "><p id="p494972184911"><a name="p494972184911"></a><a name="p494972184911"></a>accumulateFactorName</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.2 "><p id="p1994912174918"><a name="p1994912174918"></a><a name="p1994912174918"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.3 "><p id="p7949192144912"><a name="p7949192144912"></a><a name="p7949192144912"></a>话单计费因子</p>
</td>
</tr>
<tr id="row56595457483"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.1 "><p id="p14949421134914"><a name="p14949421134914"></a><a name="p14949421134914"></a>accumulateFactorValue</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.2 "><p id="p18949192114910"><a name="p18949192114910"></a><a name="p18949192114910"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.3 "><p id="p294952104917"><a name="p294952104917"></a><a name="p294952104917"></a>计费因子值</p>
</td>
</tr>
<tr id="row7437048174811"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.1 "><p id="p29496214499"><a name="p29496214499"></a><a name="p29496214499"></a>extendParams</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.2 "><p id="p4949162134910"><a name="p4949162134910"></a><a name="p4949162134910"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.3 "><p id="p16949112113499"><a name="p16949112113499"></a><a name="p16949112113499"></a>扩展字段</p>
</td>
</tr>
<tr id="row8830550164814"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.1 "><p id="p59505214494"><a name="p59505214494"></a><a name="p59505214494"></a>resourceTag</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.2 "><p id="p5950152112492"><a name="p5950152112492"></a><a name="p5950152112492"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.3 "><p id="p18950102154918"><a name="p18950102154918"></a><a name="p18950102154918"></a>扩展字段</p>
</td>
</tr>
</tbody>
</table>

响应消息样例：

```
{
  "source_data": [
    {
      "project_id": "205fa874817a4dcfae9222a3be4725e8",
      "regionId": "xxx-north-1",
      "azId": "xxx-north-1",
      "cloudServiceType": "hws.service.type.apig",
      "resourceType": "hws.resource.type.apig",
      "resourceSpecCode": "apig",
      "resource_id": "205fa874817a4dcfae9222a3be4725e8",
      "bssParams": "",
      "beginTime": "20180303012300",
      "endTime": "20180309012400",
      "accumulateFactorName": "count",
      "accumulateFactorValue": "19",
      "extendParams": "",
      "resourceTag": ""
},
……
……
  ]
}
```

## 响应码<a name="section10983825194612"></a>

**表 4**  返回消息说明

<a name="table11438104424617"></a>
<table><thead align="left"><tr id="row1643820448464"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.3.1.1"><p id="p4272113476"><a name="p4272113476"></a><a name="p4272113476"></a>响应码</p>
</th>
<th class="cellrowborder" valign="top" width="80%" id="mcps1.2.3.1.2"><p id="p202192154718"><a name="p202192154718"></a><a name="p202192154718"></a>说明</p>
</th>
</tr>
</thead>
<tbody><tr id="row24383446462"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p62162184714"><a name="p62162184714"></a><a name="p62162184714"></a>200</p>
</td>
<td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p112162113475"><a name="p112162113475"></a><a name="p112162113475"></a>OK</p>
</td>
</tr>
<tr id="row6438154417469"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p1228216472"><a name="p1228216472"></a><a name="p1228216472"></a>400</p>
</td>
<td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p132182116477"><a name="p132182116477"></a><a name="p132182116477"></a>bad request</p>
</td>
</tr>
<tr id="row1943874416467"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p12262144711"><a name="p12262144711"></a><a name="p12262144711"></a>401</p>
</td>
<td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p20220215475"><a name="p20220215475"></a><a name="p20220215475"></a>unauthorized</p>
</td>
</tr>
<tr id="row1043834417462"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p1292117477"><a name="p1292117477"></a><a name="p1292117477"></a>403</p>
</td>
<td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p32921144714"><a name="p32921144714"></a><a name="p32921144714"></a>Forbidden</p>
</td>
</tr>
<tr id="row6439344194617"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p7282116471"><a name="p7282116471"></a><a name="p7282116471"></a>500</p>
</td>
<td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p62112110471"><a name="p62112110471"></a><a name="p62112110471"></a>server internal error</p>
</td>
</tr>
</tbody>
</table>

